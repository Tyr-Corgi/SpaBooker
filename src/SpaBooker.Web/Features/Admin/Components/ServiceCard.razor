@using SpaBooker.Core.Entities

@* Service Card Component - Display service group information in a tile *@

<div class="col-md-6 col-lg-4">
    <div class="card h-100 shadow-sm hover-lift">
        @if (!string.IsNullOrEmpty(ServiceGroup.ImageUrl))
        {
            <img src="@ServiceGroup.ImageUrl" class="card-img-top" alt="@ServiceGroup.Name" style="height: 200px; object-fit: cover;">
        }
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">@ServiceGroup.Name</h5>
                <span class="badge bg-info">@ServiceGroup.Category</span>
            </div>
            
            <p class="card-text text-muted small">@ServiceGroup.Description</p>
            
            <!-- Durations -->
            <div class="mb-3">
                <strong class="small">Durations & Prices:</strong>
                <div class="mt-1">
                    @foreach (var duration in ServiceGroup.Durations.Where(d => d.IsActive).OrderBy(d => d.DurationMinutes))
                    {
                        <span class="badge bg-light text-dark me-1 mb-1">
                            @duration.DurationMinutes min - $@duration.Price.ToString("F2")
                        </span>
                    }
                </div>
            </div>
            
            <!-- Therapists -->
            <div class="mb-3">
                <strong class="small">Therapists (@ServiceGroup.Therapists.Count):</strong>
                <div class="mt-1">
                    @if (ServiceGroup.Therapists.Any())
                    {
                        @foreach (var therapist in ServiceGroup.Therapists.Take(3))
                        {
                            <span class="badge bg-secondary me-1 mb-1">
                                @therapist.Therapist.FirstName @therapist.Therapist.LastName
                            </span>
                        }
                        @if (ServiceGroup.Therapists.Count > 3)
                        {
                            <span class="badge bg-secondary">+@(ServiceGroup.Therapists.Count - 3) more</span>
                        }
                    }
                    else
                    {
                        <span class="text-muted small">No therapists assigned</span>
                    }
                </div>
            </div>
            
            <!-- Rooms -->
            <div class="mb-3">
                <strong class="small">Rooms (@ServiceGroup.Rooms.Count):</strong>
                <div class="mt-1">
                    @if (ServiceGroup.Rooms.Any())
                    {
                        @foreach (var room in ServiceGroup.Rooms.Take(3))
                        {
                            <span class="badge bg-light text-dark me-1 mb-1" style="border: 2px solid @room.Room.ColorCode;">
                                @room.Room.Name
                            </span>
                        }
                        @if (ServiceGroup.Rooms.Count > 3)
                        {
                            <span class="badge bg-light text-dark">+@(ServiceGroup.Rooms.Count - 3) more</span>
                        }
                    }
                    else
                    {
                        <span class="text-muted small">No rooms assigned</span>
                    }
                </div>
            </div>
        </div>
        <div class="card-footer bg-transparent">
            <button class="btn btn-rose-gold btn-sm w-100" @onclick="HandleEditClick">
                <i class="bi bi-pencil"></i> Edit Service
            </button>
        </div>
    </div>
</div>

@code {
    [Parameter] public ServiceGroup ServiceGroup { get; set; } = null!;
    [Parameter] public EventCallback<int> OnEditService { get; set; }

    private async Task HandleEditClick()
    {
        await OnEditService.InvokeAsync(ServiceGroup.Id);
    }
}

<style>
    .hover-lift {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .hover-lift:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
    }
    
    .btn-rose-gold {
        background-color: #b76e79;
        border-color: #b76e79;
        color: white;
    }
    
    .btn-rose-gold:hover {
        background-color: #a05a66;
        border-color: #a05a66;
        color: white;
    }
</style>
